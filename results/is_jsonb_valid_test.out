CREATE EXTENSION is_jsonb_valid;
SELECT is_jsonb_valid('{}', '{}');
 is_jsonb_valid 
----------------
 t
(1 row)

SELECT is_jsonb_valid('{"type": "object"}', '{}');
INFO:  Type is correct
 is_jsonb_valid 
----------------
 t
(1 row)

SELECT is_jsonb_valid('{"type": "object"}', '2');
INFO:  Type is not correct
 is_jsonb_valid 
----------------
 f
(1 row)

SELECT is_jsonb_valid('{"type": "object"}', '{"a": 1}');
INFO:  Type is correct
 is_jsonb_valid 
----------------
 t
(1 row)

SELECT is_jsonb_valid('{"type": "number"}', '2');
INFO:  Type is correct
 is_jsonb_valid 
----------------
 t
(1 row)

SELECT is_jsonb_valid('{"type": "integer"}', '2');
INFO:  Type is correct
 is_jsonb_valid 
----------------
 t
(1 row)

SELECT is_jsonb_valid('{"type": "integer"}', '2.5');
INFO:  Type is not correct
 is_jsonb_valid 
----------------
 f
(1 row)

SELECT is_jsonb_valid('{"properties": {}}', '2.5');
INFO:  There are properties to check
 is_jsonb_valid 
----------------
 t
(1 row)

SELECT is_jsonb_valid('{"properties": {"a": {"type": "integer"}}}', '{"a": 1}');
INFO:  There are properties to check
INFO:  Type is not correct
INFO:  Property is not valid
 is_jsonb_valid 
----------------
 f
(1 row)

SELECT is_jsonb_valid('{"properties": {"a": {"type": "integer"}}}', '{"a": 2.5}');
INFO:  There are properties to check
INFO:  Type is not correct
INFO:  Property is not valid
 is_jsonb_valid 
----------------
 f
(1 row)

SELECT is_jsonb_valid('{"properties": {"a": {"type": "integer"}}}', '{"b": 1}');
INFO:  There are properties to check
INFO:  Property is valid
 is_jsonb_valid 
----------------
 t
(1 row)

SELECT is_jsonb_valid('{"type": 1}', '2');
ERROR:  Type must be string
select jsonb_get2('{"a": 2}');
INFO:  Element is not object
INFO:  Element is not binary
 jsonb_get2 
------------
 2
(1 row)

select jsonb_get2('{"a": {"c": 2}}');
INFO:  Element is not object
INFO:  element is binary
 jsonb_get2 
------------
 {"c": 2}
(1 row)

select jsonb_get2('{"b": 2}');
server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.
connection to server was lost
